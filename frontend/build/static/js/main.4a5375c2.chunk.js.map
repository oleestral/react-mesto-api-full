{"version":3,"sources":["images/logo.svg","components/Header.js","images/pencil.svg","images/CloseIcon.svg","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","utils/api.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","images/success.svg","images/error.svg","components/InfoTooltip.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","location","useLocation","className","src","logo","alt","loggedIn","email","onClick","onLogOut","type","to","pathname","CurrentUserContext","React","createContext","Card","currentUser","useContext","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","id","link","name","onCardClick","onCardLike","length","onCardDelete","Main","avatar","pencil","isEditAvatarPopupOpen","about","isEditProfilePopupOpen","isAddPlacePopupOpen","closeIcon","cards","map","item","Footer","ImagePopup","isOpen","onClose","api","address","headers","this","_address","_headers","res","ok","json","Promise","reject","status","token","fetch","method","then","_getResponseData","body","JSON","stringify","authorization","_token","info","localStorage","getItem","PopupWithForm","title","onSubmit","children","buttonText","EditProfilePopup","useState","setName","description","setDescription","useEffect","e","preventDefault","onUpdateUser","placeholder","autoComplete","minLength","maxLength","required","value","onChange","target","EditAvatarPopup","ref","useRef","onUpdateAvatar","current","AddPlacePopup","place","setPlace","setLink","onAddCard","withRouter","history","useHistory","setEmail","password","setPassword","onLogin","push","onRegister","ProtectedRoute","Component","component","InfoTooltip","isSuccessful","success","error","auth","BASE_URL","_url","Accept","Authorization","App","setCurrentUser","setIsAddPlacePopupOpen","setIsEditAvatarPopupOpen","setIsEditProfilePopupOpen","selectedCard","setSelectedCard","imageOpened","setImageOpened","setCards","setLoggedIn","setSuccess","isInfoTooltipPopupOpen","setIsInfoTooltipPopupOpen","getGeneralData","all","getUserInfo","getInitialCards","catch","err","console","log","closeAllPopups","jwt","checkToken","closeByEscape","key","document","addEventListener","removeEventListener","Provider","removeItem","exact","path","changeLikeCardStatus","newCard","state","c","removeUserCards","filter","signIn","setItem","signUp","addUserCards","editUserProfile","updateUserAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.4a5375c2.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.03b78ada.svg\";","import React from \"react\";\nimport logo from \"../images/logo.svg\";\nimport { Link, useLocation } from \"react-router-dom\";\n\nfunction Header(props) {\n  const location = useLocation();\n  return (\n    <header className=\"header\">\n      <img className=\"header__logo\" src={logo} alt=\"Место Россия\" />\n      {props.loggedIn ? (\n        <div className=\"header__box\">\n          <p className=\"header__link\">{props.email}</p>\n          <button\n            className=\"header__btn\"\n            onClick={props.onLogOut}\n            type=\"submit\"\n          >\n            Выйти\n          </button>\n        </div>\n      ) : (\n        <Link\n          to={location.pathname === \"/signin\" ? \"/signup\" : \"/signin\"}\n          className=\"header__link\"\n        >\n          {`${location.pathname === \"/signin\" ? \"Регистрация\" : \"Войти\"}`}\n        </Link>\n      )}\n    </header>\n  );\n}\nexport default Header;\n","export default __webpack_public_path__ + \"static/media/pencil.88838230.svg\";","export default __webpack_public_path__ + \"static/media/CloseIcon.118074ba.svg\";","import React from \"react\";\nexport const CurrentUserContext = React.createContext();\n","import React from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction Card(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const isOwn = props.card.owner === currentUser._id;\n  const cardDeleteButtonClassName = `element__delete-button ${\n    isOwn ? \"\" : \"element__delete-button-invisibility\"\n  }`;\n  const isLiked = props.card.likes.some((i) => i === currentUser._id);\n  const cardLikeButtonClassName = `element__like-button ${\n    isLiked ? \"element__like-button_active\" : \"\"\n  }`;\n\n  function handleClick() {\n    props.onCardClick(props.card);\n  }\n  function handleLikeClick() {\n    props.onCardLike(props.card);\n  }\n  function handleDeleteClick() {\n    props.onCardDelete(props.card);\n  }\n\n  return (\n    <article className=\"element\" id={props.card._id}>\n      <img\n        className=\"element__image\"\n        src={props.card.link}\n        alt={props.name}\n        onClick={handleClick}\n      />\n      <div className=\"element__footer\">\n        <h2 className=\"element__paragraph\">{props.card.name}</h2>\n        <button\n          type=\"button\"\n          className={cardLikeButtonClassName}\n          onClick={handleLikeClick}\n        ></button>\n      </div>\n      <p className=\"element__like-counter\">{props.card.likes.length}</p>\n      <button\n        type=\"button\"\n        className={cardDeleteButtonClassName}\n        onClick={handleDeleteClick}\n      ></button>\n    </article>\n  );\n}\nexport default Card;\n","import React from \"react\";\nimport pencil from \"../images/pencil.svg\";\nimport closeIcon from \"../images/CloseIcon.svg\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport Card from \"./Card\";\n\nfunction Main(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <main className=\"content\">\n      <section className=\"profile\">\n        <img\n          className=\"profile__avatar\"\n          src={currentUser.avatar}\n          alt=\"аватар\"\n        />\n        <img\n          className=\"profile__avatar-edit\"\n          src={pencil}\n          alt=\"Редактировать профиль\"\n          onClick={props.isEditAvatarPopupOpen}\n        />\n        <div className=\"profile__info\">\n          <div className=\"profile__info-items\">\n            <h1 className=\"profile__info-name\">{currentUser.name}</h1>\n            <p className=\"profile__info-self-description\">\n              {currentUser.about}\n            </p>\n          </div>\n          <button\n            type=\"button\"\n            className=\"profile__info-edit-button button\"\n            onClick={props.isEditProfilePopupOpen}\n          ></button>\n        </div>\n        <button\n          type=\"button\"\n          className=\"profile__info-add-button button\"\n          onClick={props.isAddPlacePopupOpen}\n        >\n          <img\n            className=\"profile__info-add-button-image\"\n            src={closeIcon}\n            alt=\"Кнопка добавить\"\n          />\n        </button>\n      </section>\n      <section className=\"elements\">\n        {props.cards.map((item) => {\n          return (\n            <Card\n              key={item._id}\n              card={item}\n              onCardClick={props.onCardClick}\n              onCardLike={props.onCardLike}\n              onCardDelete={props.onCardDelete}\n            />\n          );\n        })}\n      </section>\n    </main>\n  );\n}\nexport default Main;\n","import React from 'react';\n\nfunction Footer() {\n    return (\n    <footer className = \"footer\">\n        <p className = \"footer__paragraph\">&copy;2021 Mesto Russia</p>\n    </footer>\n    )\n}\nexport default Footer;","import React from 'react';\n\n\nfunction ImagePopup(props) {\n    return (\n        <div className = {`popup popup-open popup-close ${props.isOpen ? \"popup_opened\" : \"\"}`}>\n            <div className = \"popup-open__container\">\n                <button type = \"button\" className = \"popup__close-button popup-open__close-button\" onClick={props.onClose}></button>\n                <img className = \"popup-open__image\" src = {props.card.link} alt = {props.card.name} id = \"opened-image\"/>\n                <h3 className = \"popup-open__title\" id = \"popup-open-title\">{props.card.name}</h3>\n            </div>\n        </div>\n    )\n}\nexport default ImagePopup;","class Api {\n  constructor({ address, headers }) {\n    this._address = address;\n    this._headers = headers;\n  }\n  _getResponseData(res) {\n    if (!res.ok) {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n    return res.json();\n  }\n  //user information\n  getUserInfo(token) {\n    return fetch(`${this._address}/users/me`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"authorization\": `Bearer ${token}`\n      },\n    }).then(this._getResponseData);\n  }\n  //edit user profile\n  editUserProfile(name, about) {\n    return fetch(`${this._address}/users/me`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: name,\n        about: about,\n      }),\n    }).then(this._getResponseData);\n  }\n  //get Initial Cards\n  getInitialCards(token) {\n    return fetch(`${this._address}/cards`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"authorization\": `Bearer ${token}`\n      },\n    }).then(this._getResponseData);\n  }\n  //add user's cards\n  addUserCards(name, link) {\n    return fetch(`${this._address}/cards`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: name,\n        link: link,\n      }),\n    }).then(this._getResponseData);\n  }\n  //remove user's card\n  removeUserCards(id) {\n    return fetch(`${this._address}/cards/${id}`, {\n      method: \"DELETE\",\n      headers: this._headers,\n    }).then(this._getResponseData);\n  }\n  //like post\n  like(id) {\n    return fetch(`${this._address}/cards/${id}/likes`, {\n      method: \"PUT\",\n      headers: this._headers,\n    }).then(this._getResponseData);\n  }\n  //remove like\n  removeLike(id) {\n    return fetch(`${this._address}/cards/${id}/likes`, {\n      method: \"DELETE\",\n      headers: {\n        authorization: this._token,\n      },\n    }).then(this._getResponseData);\n  }\n  //update user avatar\n  updateUserAvatar(info) {\n    return fetch(`${this._address}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: info.avatar,\n      }),\n    }).then(this._getResponseData);\n  }\n  changeLikeCardStatus(id, isLiked) {\n    const method = isLiked ? \"DELETE\" : \"PUT\";\n    return fetch(`${this._address}/cards/${id}/likes`, {\n      method: method,\n      headers: this._headers,\n    }).then(this._getResponseData);\n  }\n}\n\nconst api = new Api({\n  address: \"https://api.oleestral.nomoredomains.work\",\n  headers: {\n    authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\n    \"Content-Type\": \"application/json\",\n  },\n});\nexport default api;\n","import React from \"react\";\n\nfunction PopupWithForm(props) {\n  return (\n    <div\n      className={`popup popup-close popup-${props.name} ${\n        props.isOpen ? \"popup_opened\" : \"\"\n      }`}\n    >\n      <div className=\"popup__container\">\n        <button\n          type=\"button\"\n          className=\"popup__close-button\"\n          onClick={props.onClose}\n        ></button>\n        <h2 className=\"popup__edit-profile\">{props.title}</h2>\n        <form\n          name={`input-container form-${props.name}`}\n          className=\"popup__form popup__input-container \"\n          onSubmit={props.onSubmit}\n        >\n          <fieldset className=\"popup__set\">{props.children}</fieldset>\n          <button\n            type=\"submit\"\n            className=\"popup__submit popup__submit-button popup__save-button\"\n          >\n            {props.buttonText}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\nexport default PopupWithForm;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction EditProfilePopup(props) {\n  const [name, setName] = React.useState(\"\");\n  const [description, setDescription] = React.useState(\"\");\n  const currentUser = React.useContext(CurrentUserContext);\n\n  function handleChangeName(e) {\n    setName(e.target.value);\n  }\n  function handleChangeDescription(e) {\n    setDescription(e.target.value);\n  }\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser, props.isOpen]);\n\n  return (\n    <PopupWithForm\n      name=\"edit\"\n      title=\"Редактировать профиль\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      buttonText=\"Сохранить\"\n      onSubmit={handleSubmit}\n    >\n      <div className=\"popup__section\">\n        <input\n          className=\"popup__input popup__item popup__item_type_name\"\n          type=\"text\"\n          id=\"name\"\n          name=\"name\"\n          placeholder=\"Ваше имя\"\n          autoComplete=\"off\"\n          minLength=\"2\"\n          maxLength=\"40\"\n          required\n          value={name || \"\"}\n          onChange={handleChangeName}\n        />\n        <span className=\"popup__input-type-error name-error\"></span>\n      </div>\n      <div className=\"popup__section\">\n        <input\n          className=\"popup__input popup__item popup__item_type_caption\"\n          type=\"text\"\n          id=\"about\"\n          name=\"about\"\n          placeholder=\"О себе\"\n          autoComplete=\"off\"\n          minLength=\"2\"\n          maxLength=\"200\"\n          required\n          value={description || \"\"}\n          onChange={handleChangeDescription}\n        />\n        <span className=\"popup__input-type-error caption-error\"></span>\n      </div>\n    </PopupWithForm>\n  );\n}\nexport default EditProfilePopup;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction EditAvatarPopup(props) {\n  const ref = React.useRef();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateAvatar({\n      avatar: ref.current.value,\n    });\n  }\n\n  return (\n    <PopupWithForm\n      name=\"update\"\n      title=\"Обновить аватар\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      buttonText=\"Сохранить\"\n      onSubmit={handleSubmit}\n    >\n      <div className=\"popup__section\">\n        <input\n          className=\"popup__input popup__item popup__item_avatar_link\"\n          type=\"url\"\n          id=\"avatar\"\n          name=\"avatar\"\n          placeholder=\"Cсылка на картинку\"\n          autoComplete=\"off\"\n          required\n          ref={ref}\n        />\n        <span className=\"popup__input-type-error avatar-error\"></span>\n      </div>\n    </PopupWithForm>\n  );\n}\nexport default EditAvatarPopup;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction AddPlacePopup(props) {\n  const [place, setPlace] = React.useState(\"\");\n  const [link, setLink] = React.useState(\"\");\n\n  function handleChangeLink(e) {\n    setLink(e.target.value);\n  }\n  function handleChangePlace(e) {\n    setPlace(e.target.value);\n  }\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onAddCard({\n      name: place,\n      link,\n    });\n  }\n  return (\n    <PopupWithForm\n      name=\"add\"\n      title=\"Новое место\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      buttonText=\"Сохранить\"\n      onSubmit={handleSubmit}\n    >\n      <div className=\"popup__section\">\n        <input\n          className=\"popup__input popup__item popup__item_card_name\"\n          type=\"text\"\n          id=\"name-place\"\n          name=\"name\"\n          placeholder=\"Название\"\n          autoComplete=\"off\"\n          minLength=\"2\"\n          maxLength=\"30\"\n          required\n          value={place}\n          onChange={handleChangePlace}\n        />\n        <span className=\"popup__input-type-error name-place-error\"></span>\n      </div>\n      <div className=\"popup__section\">\n        <input\n          className=\"popup__input popup__item popup__item_card_link\"\n          type=\"url\"\n          id=\"link\"\n          name=\"link\"\n          placeholder=\"Cсылка на картинку\"\n          autoComplete=\"off\"\n          required\n          value={link}\n          onChange={handleChangeLink}\n        />\n        <span className=\"popup__input-type-error link-error\"></span>\n      </div>\n    </PopupWithForm>\n  );\n}\nexport default AddPlacePopup;\n","import React from \"react\";\nimport { withRouter, useHistory } from \"react-router-dom\";\n\nfunction Login(props) {\n  const history = useHistory();\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n\n  function handleChangeEmail(e) {\n    setEmail(e.target.value);\n  }\n  function handleChangePasword(e) {\n    setPassword(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onLogin(email, password);\n    history.push(\"/\");\n  }\n\n  return (\n    <div className=\"login\">\n      <div className=\"login__container\">\n        <h2 className=\"login__title\">Вход</h2>\n        <form className=\"login__form\" onSubmit={handleSubmit}>\n          <input\n            className=\"popup__input popup__item login__item\"\n            name=\"email\"\n            id=\"email\"\n            placeholder=\"Email\"\n            required\n            type=\"email\"\n            value={email}\n            onChange={handleChangeEmail}\n          />\n          <input\n            className=\"popup__input popup__item login__item\"\n            name=\"password\"\n            id=\"password\"\n            placeholder=\"Пароль\"\n            required\n            type=\"password\"\n            password={password}\n            onChange={handleChangePasword}\n          />\n          <button className=\"login__button\">Войти</button>\n        </form>\n      </div>\n    </div>\n  );\n}\nexport default withRouter(Login);\n","import React from \"react\";\nimport { Link, withRouter, useHistory } from \"react-router-dom\";\n\nfunction Register(props) {\n  const history = useHistory();\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n\n  function handleSetEmail(e) {\n    setEmail(e.target.value);\n  }\n  function handleSetPasword(e) {\n    setPassword(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onRegister(email, password);\n    history.push(\"/signin\");\n  }\n\n  return (\n    <div className=\"login\">\n      <div className=\"login__container\">\n        <h2 className=\"login__title\">Регистрация</h2>\n        <form className=\"login__form\" onSubmit={handleSubmit}>\n          <input\n            className=\"popup__input popup__item login__item\"\n            name=\"email\"\n            id=\"email\"\n            placeholder=\"Email\"\n            required\n            value={email}\n            onChange={handleSetEmail}\n            autoComplete=\"off\"\n          />\n          <input\n            className=\"popup__input popup__item login__item\"\n            name=\"password\"\n            id=\"password\"\n            placeholder=\"Пароль\"\n            required\n            type=\"password\"\n            value={password}\n            autoComplete=\"off\"\n            onChange={handleSetPasword}\n          />\n          <button className=\"login__button\">Зарегистрироваться</button>\n          <p className=\"login__paragraph\">\n            Уже зарегистрированы?{\" \"}\n            <Link to=\"/signin\" className=\"login__link\">\n              Войти\n            </Link>\n          </p>\n        </form>\n      </div>\n    </div>\n  );\n}\nexport default withRouter(Register);\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props }) => {\n  return (\n    <Route>\n      {() =>\n        props.loggedIn ? <Component {...props} /> : <Redirect to=\"./signup\" />\n      }\n    </Route>\n  );\n};\n\nexport default ProtectedRoute;\n","export default __webpack_public_path__ + \"static/media/success.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/error.df8eddf6.svg\";","import React from \"react\";\nimport success from \"../images/success.svg\";\nimport error from \"../images/error.svg\";\n\nfunction InfoTooltip(props) {\n  return (\n    <div className={`popup popup-close ${props.isOpen ? \"popup_opened\" : \"\"}`}>\n      <div className=\"popup__container\">\n        <button\n          type=\"button\"\n          className=\"popup__close-button\"\n          onClick={props.onClose}\n        ></button>\n        <img\n          className=\"popup__image\"\n          src={props.isSuccessful ? success : error}\n          alt={props.isSuccessful ? \"Успешно\" : \"Ошибка\"}\n        />\n        <h2 className=\"popup__edit-profile popup__tooltip-title\">\n          {props.isSuccessful\n            ? \"Вы успешно зарегистрировались!\"\n            : \"Что-то пошло не так! Попробуйте ещё раз.\"}{\" \"}\n        </h2>\n      </div>\n    </div>\n  );\n}\n\nexport default InfoTooltip;\n","class Auth {\n  constructor({ BASE_URL, headers  }) {\n    this._url = BASE_URL;\n    this._headers = headers;\n  }\n  _getResponseData(res) {\n    if (!res.ok) {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n    return res.json();\n  }\n  signIn(email, password) {\n    return fetch(`${this._url}/signin`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({ email: email, password: password }),\n    }).then(this._getResponseData);\n  }\n  signUp(email, password) {\n    return fetch(`${this._url}/signup`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({ email: email, password: password }),\n    }).then(this._getResponseData);\n  }\n  checkToken(token) {\n    return fetch(`${this._url}/users/me`, {\n      method: \"GET\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n    }).then(this._getResponseData);\n  }\n}\nconst auth = new Auth({ BASE_URL: \"https://api.oleestral.nomoredomains.work\",\nheaders: {\n  \"Content-Type\": \"application/json\",\n  \"Accept\": \"application/json\"\n} });\nexport default auth;\n","import React from \"react\";\nimport \"../index.css\";\nimport Header from \"../components/Header\";\nimport Main from \"./Main\";\nimport Footer from \"../components/Footer\";\nimport ImagePopup from \"./ImagePopup\";\nimport api from \"../utils/api\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport {\n  Redirect,\n  Route,\n  Switch,\n  useHistory,\n  BrowserRouter,\n} from \"react-router-dom\";\nimport auth from \"../utils/auth\";\n\nfunction App() {\n  const history = useHistory();\n  const [currentUser, setCurrentUser] = React.useState({ name: \"\", about: \"\" });\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] =\n    React.useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] =\n    React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [imageOpened, setImageOpened] = React.useState(false);\n  const [cards, setCards] = React.useState([]);\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [email, setEmail] = React.useState(\"\");\n  const [success, setSuccess] = React.useState(false);\n  const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] =\n    React.useState(false);\n\n  // user data & initial cards\n  function getGeneralData(token) {\n    Promise.all([api.getUserInfo(token), api.getInitialCards(token)])\n      .then(([info, card]) => {\n        setCurrentUser(info);\n        setCards(card);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  //delete card\n  function handleDeleteClick(card) {\n    api\n      .removeUserCards(card._id)\n      .then(() => {\n        setCards((state) => state.filter((c) => c._id !== card._id));\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n  // update user profile\n  function handleUpdateUser({ name, about }) {\n    api\n      .editUserProfile(name, about)\n      .then((info) => {\n        setCurrentUser(info);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n  // update user avatar\n  function handleUpdateAvatar(link) {\n    api\n      .updateUserAvatar(link)\n      .then((info) => {\n        setCurrentUser(info);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n  // add card\n  function handleAddCard({ name, link }) {\n    api\n      .addUserCards(name, link)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n  // open card\n  function handleCardClick(item) {\n    setImageOpened(!imageOpened);\n    setSelectedCard(item);\n  }\n  // for openning add popup\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(!isAddPlacePopupOpen);\n  }\n  // for openning avatar popup\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(!isEditAvatarPopupOpen);\n  }\n  // for openning profile popup\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(!isEditProfilePopupOpen);\n  }\n\n  // close popups\n  function closeAllPopups() {\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setSelectedCard({});\n    setImageOpened(false);\n    setIsInfoTooltipPopupOpen(false);\n  }\n  // like\n  function handleCardLike(card) {\n    // Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some((i) => i === currentUser._id);\n    // Отправляем запрос в API и получаем обновлённые данные карточки\n    api\n      .changeLikeCardStatus(card._id, isLiked)\n      .then((newCard) => {\n        setCards((state) =>\n          state.map((c) => (c._id === card._id ? newCard : c))\n        );\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n  //login\n  function handleSignIn(email, password) {\n    auth\n      .signIn(email, password)\n      .then((item) => {\n        localStorage.setItem(\"jwt\", item.token);\n        setLoggedIn(true);\n        setEmail(email);\n        getGeneralData(item.token)\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n  //signup\n  function handleSignUp(email, password) {\n    auth\n      .signUp(email, password)\n      .then((item) => {\n        setSuccess(true);\n        setIsInfoTooltipPopupOpen(true);\n      })\n      .catch((err) => {\n        console.log(err);\n        setSuccess(false);\n        setIsInfoTooltipPopupOpen(true);\n      });\n  }\n  //logout\n  function handleLogOut() {\n    setLoggedIn(false);\n    localStorage.removeItem(\"jwt\");\n    history.push(\"/signin\");\n  }\n\n  React.useEffect(() => {\n    const jwt = localStorage.getItem(\"jwt\");\n    auth\n      .checkToken(jwt)\n      .then((item) => {\n        setLoggedIn(true);\n        setEmail(item.email);\n        getGeneralData(jwt)\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, [loggedIn, isEditProfilePopupOpen, isEditAvatarPopupOpen]);\n\n  // closing popups by Escape\n  React.useEffect(() => {\n    const closeByEscape = (e) => {\n      if (e.key === \"Escape\") {\n        closeAllPopups();\n      }\n    };\n\n    document.addEventListener(\"keydown\", closeByEscape);\n\n    return () => document.removeEventListener(\"keydown\", closeByEscape);\n  }, []);\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"root\">\n        <div className=\"page\">\n          <BrowserRouter>\n            <Header email={email} onLogOut={handleLogOut} loggedIn={loggedIn} />\n            <Switch>\n              <ProtectedRoute\n                exact\n                path=\"/\"\n                loggedIn={loggedIn}\n                component={Main}\n                isAddPlacePopupOpen={handleAddPlaceClick}\n                isEditProfilePopupOpen={handleEditProfileClick}\n                isEditAvatarPopupOpen={handleEditAvatarClick}\n                onCardClick={handleCardClick}\n                onCardLike={handleCardLike}\n                onCardDelete={handleDeleteClick}\n                cards={cards}\n                email={email}\n              />\n              <Route path=\"/signin\">\n                {loggedIn ? (\n                  <Redirect to=\"/\" />\n                ) : (\n                  <Login onLogin={handleSignIn} />\n                )}\n              </Route>\n              <Route path=\"/signup\">\n                {loggedIn ? (\n                  <Redirect to=\"/\" />\n                ) : (\n                  <Register onRegister={handleSignUp} />\n                )}\n              </Route>\n              <Route path=\"/\">\n                {!loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/signup\" />}\n              </Route>\n            </Switch>\n          </BrowserRouter>\n          {loggedIn && <Footer />}\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopups}\n            onAddCard={handleAddCard}\n          />\n\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n          />\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onUpdateAvatar={handleUpdateAvatar}\n          />\n          <ImagePopup\n            card={selectedCard}\n            onClose={closeAllPopups}\n            isOpen={imageOpened}\n          />\n          <InfoTooltip\n            isOpen={isInfoTooltipPopupOpen}\n            onClose={closeAllPopups}\n            isSuccessful={success}\n          />\n        </div>\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}