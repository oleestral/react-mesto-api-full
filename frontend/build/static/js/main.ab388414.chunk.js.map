{"version":3,"sources":["images/logo.svg","components/Header.js","images/pencil.svg","images/CloseIcon.svg","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","utils/api.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","images/success.svg","images/error.svg","components/InfoTooltip.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","location","useLocation","className","src","logo","alt","loggedIn","email","onClick","onLogOut","type","to","pathname","CurrentUserContext","React","createContext","Card","currentUser","useContext","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","id","link","name","onCardClick","onCardLike","length","onCardDelete","Main","avatar","pencil","isEditAvatarPopupOpen","about","isEditProfilePopupOpen","isAddPlacePopupOpen","closeIcon","cards","map","item","Footer","ImagePopup","isOpen","onClose","api","address","headers","this","_address","_headers","res","ok","json","Promise","reject","status","fetch","method","then","_getResponseData","body","JSON","stringify","authorization","_token","info","localStorage","getItem","PopupWithForm","title","onSubmit","children","buttonText","EditProfilePopup","useState","setName","description","setDescription","useEffect","e","preventDefault","onUpdateUser","placeholder","autoComplete","minLength","maxLength","required","value","onChange","target","EditAvatarPopup","ref","useRef","onUpdateAvatar","current","AddPlacePopup","place","setPlace","setLink","onAddCard","withRouter","history","useHistory","setEmail","password","setPassword","onLogin","push","onRegister","ProtectedRoute","Component","component","InfoTooltip","isSuccessful","success","error","auth","BASE_URL","_url","token","Accept","Authorization","App","setCurrentUser","setIsAddPlacePopupOpen","setIsEditAvatarPopupOpen","setIsEditProfilePopupOpen","selectedCard","setSelectedCard","imageOpened","setImageOpened","setCards","setLoggedIn","setSuccess","isInfoTooltipPopupOpen","setIsInfoTooltipPopupOpen","closeAllPopups","jwt","console","log","checkToken","all","getUserInfo","getInitialCards","catch","err","closeByEscape","key","document","addEventListener","removeEventListener","Provider","removeItem","exact","path","changeLikeCardStatus","newCard","state","c","removeUserCards","filter","signIn","setItem","signUp","addUserCards","editUserProfile","updateUserAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"yMAAe,MAA0B,iC,qBC+B1BA,MA3Bf,SAAgBC,GACd,IAAMC,EAAWC,cACjB,OACE,yBAAQC,UAAU,SAAlB,UACE,qBAAKA,UAAU,eAAeC,IAAKC,EAAMC,IAAI,wEAC5CN,EAAMO,SACL,sBAAKJ,UAAU,cAAf,UACE,mBAAGA,UAAU,eAAb,SAA6BH,EAAMQ,QACnC,wBACEL,UAAU,cACVM,QAAST,EAAMU,SACfC,KAAK,SAHP,+CASF,cAAC,IAAD,CACEC,GAA0B,YAAtBX,EAASY,SAAyB,UAAY,UAClDV,UAAU,eAFZ,mBAI4B,YAAtBF,EAASY,SAAyB,qEAAgB,wCCzBjD,MAA0B,mCCA1B,MAA0B,sCCC5BC,EAAqBC,IAAMC,gBCiDzBC,MA/Cf,SAAcjB,GACZ,IAAMkB,EAAcH,IAAMI,WAAWL,GAE/BM,EAAQpB,EAAMqB,KAAKC,QAAUJ,EAAYK,IACzCC,EAAyB,iCAC7BJ,EAAQ,GAAK,uCAETK,EAAUzB,EAAMqB,KAAKK,MAAMC,MAAK,SAACC,GAAD,OAAOA,IAAMV,EAAYK,OACzDM,EAAuB,+BAC3BJ,EAAU,8BAAgC,IAa5C,OACE,0BAAStB,UAAU,UAAU2B,GAAI9B,EAAMqB,KAAKE,IAA5C,UACE,qBACEpB,UAAU,iBACVC,IAAKJ,EAAMqB,KAAKU,KAChBzB,IAAKN,EAAMgC,KACXvB,QAhBN,WACET,EAAMiC,YAAYjC,EAAMqB,SAiBtB,sBAAKlB,UAAU,kBAAf,UACE,oBAAIA,UAAU,qBAAd,SAAoCH,EAAMqB,KAAKW,OAC/C,wBACErB,KAAK,SACLR,UAAW0B,EACXpB,QApBR,WACET,EAAMkC,WAAWlC,EAAMqB,YAsBrB,mBAAGlB,UAAU,wBAAb,SAAsCH,EAAMqB,KAAKK,MAAMS,SACvD,wBACExB,KAAK,SACLR,UAAWqB,EACXf,QAxBN,WACET,EAAMoC,aAAapC,EAAMqB,aC0CdgB,MA1Df,SAAcrC,GACZ,IAAMkB,EAAcH,IAAMI,WAAWL,GAErC,OACE,uBAAMX,UAAU,UAAhB,UACE,0BAASA,UAAU,UAAnB,UACE,qBACEA,UAAU,kBACVC,IAAKc,EAAYoB,OACjBhC,IAAI,yCAEN,qBACEH,UAAU,uBACVC,IAAKmC,EACLjC,IAAI,4HACJG,QAAST,EAAMwC,wBAEjB,sBAAKrC,UAAU,gBAAf,UACE,sBAAKA,UAAU,sBAAf,UACE,oBAAIA,UAAU,qBAAd,SAAoCe,EAAYc,OAChD,mBAAG7B,UAAU,iCAAb,SACGe,EAAYuB,WAGjB,wBACE9B,KAAK,SACLR,UAAU,mCACVM,QAAST,EAAM0C,4BAGnB,wBACE/B,KAAK,SACLR,UAAU,kCACVM,QAAST,EAAM2C,oBAHjB,SAKE,qBACExC,UAAU,iCACVC,IAAKwC,EACLtC,IAAI,+FAIV,yBAASH,UAAU,WAAnB,SACGH,EAAM6C,MAAMC,KAAI,SAACC,GAChB,OACE,cAAC,EAAD,CAEE1B,KAAM0B,EACNd,YAAajC,EAAMiC,YACnBC,WAAYlC,EAAMkC,WAClBE,aAAcpC,EAAMoC,cAJfW,EAAKxB,cC3CTyB,MAPf,WACI,OACA,wBAAQ7C,UAAY,SAApB,SACI,mBAAGA,UAAY,oBAAf,sCCSO8C,MAXf,SAAoBjD,GAChB,OACI,qBAAKG,UAAS,uCAAoCH,EAAMkD,OAAS,eAAiB,IAAlF,SACI,sBAAK/C,UAAY,wBAAjB,UACI,wBAAQQ,KAAO,SAASR,UAAY,+CAA+CM,QAAST,EAAMmD,UAClG,qBAAKhD,UAAY,oBAAoBC,IAAOJ,EAAMqB,KAAKU,KAAMzB,IAAON,EAAMqB,KAAKW,KAAMF,GAAK,iBAC1F,oBAAI3B,UAAY,oBAAoB2B,GAAK,mBAAzC,SAA6D9B,EAAMqB,KAAKW,a,gBCuFzEoB,EAPH,I,WAxFV,cAAmC,IAArBC,EAAoB,EAApBA,QAASC,EAAW,EAAXA,QAAW,oBAChCC,KAAKC,SAAWH,EAChBE,KAAKE,SAAWH,E,oDAElB,SAAiBI,GACf,OAAKA,EAAIC,GAGFD,EAAIE,OAFFC,QAAQC,OAAR,gDAA0BJ,EAAIK,W,yBAKzC,WACE,OAAOC,MAAM,GAAD,OAAIT,KAAKC,SAAT,aAA8B,CACxCS,OAAQ,MACRX,QAASC,KAAKE,WACbS,KAAKX,KAAKY,oB,6BAGf,SAAgBnC,EAAMS,GACpB,OAAOuB,MAAM,GAAD,OAAIT,KAAKC,SAAT,aAA8B,CACxCS,OAAQ,QACRX,QAASC,KAAKE,SACdW,KAAMC,KAAKC,UAAU,CACnBtC,KAAMA,EACNS,MAAOA,MAERyB,KAAKX,KAAKY,oB,6BAGf,WACE,OAAOH,MAAM,GAAD,OAAIT,KAAKC,SAAT,UAA2B,CACrCS,OAAQ,MACRX,QAASC,KAAKE,WACbS,KAAKX,KAAKY,oB,0BAGf,SAAanC,EAAMD,GACjB,OAAOiC,MAAM,GAAD,OAAIT,KAAKC,SAAT,UAA2B,CACrCS,OAAQ,OACRX,QAASC,KAAKE,SACdW,KAAMC,KAAKC,UAAU,CACnBtC,KAAMA,EACND,KAAMA,MAEPmC,KAAKX,KAAKY,oB,6BAGf,SAAgBrC,GACd,OAAOkC,MAAM,GAAD,OAAIT,KAAKC,SAAT,kBAA2B1B,GAAM,CAC3CmC,OAAQ,SACRX,QAASC,KAAKE,WACbS,KAAKX,KAAKY,oB,kBAGf,SAAKrC,GACH,OAAOkC,MAAM,GAAD,OAAIT,KAAKC,SAAT,kBAA2B1B,EAA3B,UAAuC,CACjDmC,OAAQ,MACRX,QAASC,KAAKE,WACbS,KAAKX,KAAKY,oB,wBAGf,SAAWrC,GACT,OAAOkC,MAAM,GAAD,OAAIT,KAAKC,SAAT,kBAA2B1B,EAA3B,UAAuC,CACjDmC,OAAQ,SACRX,QAAS,CACPiB,cAAehB,KAAKiB,UAErBN,KAAKX,KAAKY,oB,8BAGf,SAAiBM,GACf,OAAOT,MAAM,GAAD,OAAIT,KAAKC,SAAT,oBAAqC,CAC/CS,OAAQ,QACRX,QAASC,KAAKE,SACdW,KAAMC,KAAKC,UAAU,CACnBhC,OAAQmC,EAAKnC,WAEd4B,KAAKX,KAAKY,oB,kCAEf,SAAqBrC,EAAIL,GACvB,IAAMwC,EAASxC,EAAU,SAAW,MACpC,OAAOuC,MAAM,GAAD,OAAIT,KAAKC,SAAT,kBAA2B1B,EAA3B,UAAuC,CACjDmC,OAAQA,EACRX,QAASC,KAAKE,WACbS,KAAKX,KAAKY,sB,KAIL,CAAQ,CAClBd,QAAS,2CACTC,QAAS,CACPiB,cAAc,UAAD,OAAYG,aAAaC,QAAQ,QAC9C,eAAgB,sBC5DLC,MA/Bf,SAAuB5E,GACrB,OACE,qBACEG,UAAS,kCAA6BH,EAAMgC,KAAnC,YACPhC,EAAMkD,OAAS,eAAiB,IAFpC,SAKE,sBAAK/C,UAAU,mBAAf,UACE,wBACEQ,KAAK,SACLR,UAAU,sBACVM,QAAST,EAAMmD,UAEjB,oBAAIhD,UAAU,sBAAd,SAAqCH,EAAM6E,QAC3C,uBACE7C,KAAI,+BAA0BhC,EAAMgC,MACpC7B,UAAU,sCACV2E,SAAU9E,EAAM8E,SAHlB,UAKE,0BAAU3E,UAAU,aAApB,SAAkCH,EAAM+E,WACxC,wBACEpE,KAAK,SACLR,UAAU,wDAFZ,SAIGH,EAAMgF,sBC6CJC,MAnEf,SAA0BjF,GACxB,MAAwBe,IAAMmE,SAAS,IAAvC,mBAAOlD,EAAP,KAAamD,EAAb,KACA,EAAsCpE,IAAMmE,SAAS,IAArD,mBAAOE,EAAP,KAAoBC,EAApB,KACMnE,EAAcH,IAAMI,WAAWL,GAoBrC,OALAC,IAAMuE,WAAU,WACdH,EAAQjE,EAAYc,MACpBqD,EAAenE,EAAYuB,SAC1B,CAACvB,EAAalB,EAAMkD,SAGrB,eAAC,EAAD,CACElB,KAAK,OACL6C,MAAM,4HACN3B,OAAQlD,EAAMkD,OACdC,QAASnD,EAAMmD,QACf6B,WAAW,yDACXF,SAnBJ,SAAsBS,GACpBA,EAAEC,iBACFxF,EAAMyF,aAAa,CACjBzD,OACAS,MAAO2C,KAST,UAQE,sBAAKjF,UAAU,iBAAf,UACE,uBACEA,UAAU,iDACVQ,KAAK,OACLmB,GAAG,OACHE,KAAK,OACL0D,YAAY,8CACZC,aAAa,MACbC,UAAU,IACVC,UAAU,KACVC,UAAQ,EACRC,MAAO/D,EACPgE,SAvCR,SAA0BT,GACxBJ,EAAQI,EAAEU,OAAOF,UAwCb,sBAAM5F,UAAU,0CAElB,sBAAKA,UAAU,iBAAf,UACE,uBACEA,UAAU,oDACVQ,KAAK,OACLmB,GAAG,QACHE,KAAK,QACL0D,YAAY,kCACZC,aAAa,MACbC,UAAU,IACVC,UAAU,MACVC,UAAQ,EACRC,MAAOX,EACPY,SApDR,SAAiCT,GAC/BF,EAAeE,EAAEU,OAAOF,UAqDpB,sBAAM5F,UAAU,iDC5BT+F,MAnCf,SAAyBlG,GACvB,IAAMmG,EAAMpF,IAAMqF,SASlB,OACE,cAAC,EAAD,CACEpE,KAAK,SACL6C,MAAM,wFACN3B,OAAQlD,EAAMkD,OACdC,QAASnD,EAAMmD,QACf6B,WAAW,yDACXF,SAdJ,SAAsBS,GACpBA,EAAEC,iBACFxF,EAAMqG,eAAe,CACnB/D,OAAQ6D,EAAIG,QAAQP,SAKtB,SAQE,sBAAK5F,UAAU,iBAAf,UACE,uBACEA,UAAU,mDACVQ,KAAK,MACLmB,GAAG,SACHE,KAAK,SACL0D,YAAY,gGACZC,aAAa,MACbG,UAAQ,EACRK,IAAKA,IAEP,sBAAMhG,UAAU,+CC6BToG,MA3Df,SAAuBvG,GACrB,MAA0Be,IAAMmE,SAAS,IAAzC,mBAAOsB,EAAP,KAAcC,EAAd,KACA,EAAwB1F,IAAMmE,SAAS,IAAvC,mBAAOnD,EAAP,KAAa2E,EAAb,KAeA,OACE,eAAC,EAAD,CACE1E,KAAK,MACL6C,MAAM,gEACN3B,OAAQlD,EAAMkD,OACdC,QAASnD,EAAMmD,QACf6B,WAAW,yDACXF,SAdJ,SAAsBS,GACpBA,EAAEC,iBACFxF,EAAM2G,UAAU,CACd3E,KAAMwE,EACNzE,UAIF,UAQE,sBAAK5B,UAAU,iBAAf,UACE,uBACEA,UAAU,iDACVQ,KAAK,OACLmB,GAAG,aACHE,KAAK,OACL0D,YAAY,mDACZC,aAAa,MACbC,UAAU,IACVC,UAAU,KACVC,UAAQ,EACRC,MAAOS,EACPR,SA/BR,SAA2BT,GACzBkB,EAASlB,EAAEU,OAAOF,UAgCd,sBAAM5F,UAAU,gDAElB,sBAAKA,UAAU,iBAAf,UACE,uBACEA,UAAU,iDACVQ,KAAK,MACLmB,GAAG,OACHE,KAAK,OACL0D,YAAY,gGACZC,aAAa,MACbG,UAAQ,EACRC,MAAOhE,EACPiE,SAhDR,SAA0BT,GACxBmB,EAAQnB,EAAEU,OAAOF,UAiDb,sBAAM5F,UAAU,8CCLTyG,mBAjDf,SAAe5G,GACb,IAAM6G,EAAUC,cAChB,EAA0B/F,IAAMmE,SAAS,IAAzC,mBAAO1E,EAAP,KAAcuG,EAAd,KACA,EAAgChG,IAAMmE,SAAS,IAA/C,mBAAO8B,EAAP,KAAiBC,EAAjB,KAeA,OACE,qBAAK9G,UAAU,QAAf,SACE,sBAAKA,UAAU,mBAAf,UACE,oBAAIA,UAAU,eAAd,sCACA,uBAAMA,UAAU,cAAc2E,SAVpC,SAAsBS,GACpBA,EAAEC,iBACFxF,EAAMkH,QAAQ1G,EAAOwG,GACrBH,EAAQM,KAAK,MAOT,UACE,uBACEhH,UAAU,uCACV6B,KAAK,QACLF,GAAG,QACH4D,YAAY,QACZI,UAAQ,EACRnF,KAAK,QACLoF,MAAOvF,EACPwF,SA1BV,SAA2BT,GACzBwB,EAASxB,EAAEU,OAAOF,UA2BZ,uBACE5F,UAAU,uCACV6B,KAAK,WACLF,GAAG,WACH4D,YAAY,uCACZI,UAAQ,EACRnF,KAAK,WACLqG,SAAUA,EACVhB,SAjCV,SAA6BT,GAC3B0B,EAAY1B,EAAEU,OAAOF,UAkCf,wBAAQ5F,UAAU,gBAAlB,uDCaKyG,mBAxDf,SAAkB5G,GAChB,IAAM6G,EAAUC,cAChB,EAA0B/F,IAAMmE,SAAS,IAAzC,mBAAO1E,EAAP,KAAcuG,EAAd,KACA,EAAgChG,IAAMmE,SAAS,IAA/C,mBAAO8B,EAAP,KAAiBC,EAAjB,KAeA,OACE,qBAAK9G,UAAU,QAAf,SACE,sBAAKA,UAAU,mBAAf,UACE,oBAAIA,UAAU,eAAd,gFACA,uBAAMA,UAAU,cAAc2E,SAVpC,SAAsBS,GACpBA,EAAEC,iBACFxF,EAAMoH,WAAW5G,EAAOwG,GACxBH,EAAQM,KAAK,YAOT,UACE,uBACEhH,UAAU,uCACV6B,KAAK,QACLF,GAAG,QACH4D,YAAY,QACZI,UAAQ,EACRC,MAAOvF,EACPwF,SAzBV,SAAwBT,GACtBwB,EAASxB,EAAEU,OAAOF,QAyBVJ,aAAa,QAEf,uBACExF,UAAU,uCACV6B,KAAK,WACLF,GAAG,WACH4D,YAAY,uCACZI,UAAQ,EACRnF,KAAK,WACLoF,MAAOiB,EACPrB,aAAa,MACbK,SAlCV,SAA0BT,GACxB0B,EAAY1B,EAAEU,OAAOF,UAmCf,wBAAQ5F,UAAU,gBAAlB,0HACA,oBAAGA,UAAU,mBAAb,iIACwB,IACtB,cAAC,IAAD,CAAMS,GAAG,UAAUT,UAAU,cAA7B,0D,gCCrCGkH,EAVQ,SAAC,GAAwC,IAA3BC,EAA0B,EAArCC,UAAyBvH,EAAY,iBAC7D,OACE,cAAC,IAAD,UACG,kBACCA,EAAMO,SAAW,cAAC+G,EAAD,eAAetH,IAAY,cAAC,IAAD,CAAUY,GAAG,iBCPlD,MAA0B,oCCA1B,MAA0B,kCC4B1B4G,MAxBf,SAAqBxH,GACnB,OACE,qBAAKG,UAAS,4BAAuBH,EAAMkD,OAAS,eAAiB,IAArE,SACE,sBAAK/C,UAAU,mBAAf,UACE,wBACEQ,KAAK,SACLR,UAAU,sBACVM,QAAST,EAAMmD,UAEjB,qBACEhD,UAAU,eACVC,IAAKJ,EAAMyH,aAAeC,EAAUC,EACpCrH,IAAKN,EAAMyH,aAAe,6CAAY,yCAExC,qBAAItH,UAAU,2CAAd,UACGH,EAAMyH,aACH,wKACA,sMAA4C,aCoB3CG,EALF,I,WAnCX,cAAqC,IAAvBC,EAAsB,EAAtBA,SAAUvE,EAAY,EAAZA,QAAY,oBAClCC,KAAKuE,KAAOD,EACZtE,KAAKE,SAAWH,E,oDAElB,SAAiBI,GACf,OAAKA,EAAIC,GAGFD,EAAIE,OAFFC,QAAQC,OAAR,gDAA0BJ,EAAIK,W,oBAIzC,SAAOvD,EAAOwG,GACZ,OAAOhD,MAAM,GAAD,OAAIT,KAAKuE,KAAT,WAAwB,CAClC7D,OAAQ,OACRX,QAASC,KAAKE,SACdW,KAAMC,KAAKC,UAAU,CAAE9D,MAAOA,EAAOwG,SAAUA,MAC9C9C,KAAKX,KAAKY,oB,oBAEf,SAAO3D,EAAOwG,GACZ,OAAOhD,MAAM,GAAD,OAAIT,KAAKuE,KAAT,WAAwB,CAClC7D,OAAQ,OACRX,QAASC,KAAKE,SACdW,KAAMC,KAAKC,UAAU,CAAE9D,MAAOA,EAAOwG,SAAUA,MAC9C9C,KAAKX,KAAKY,oB,wBAEf,SAAW4D,GACT,OAAO/D,MAAM,GAAD,OAAIT,KAAKuE,KAAT,aAA0B,CACpC7D,OAAQ,MACRX,QAAS,CACP0E,OAAQ,mBACR,eAAgB,mBAChBC,cAAc,UAAD,OAAYF,MAE1B7D,KAAKX,KAAKY,sB,KAGJ,CAAS,CAAE0D,SAAU,2CAClCvE,QAAS,CACP,eAAgB,mBAChB,OAAU,sBCqPG4E,MApQf,WACE,IAAMrB,EAAUC,cAChB,EAAsC/F,IAAMmE,SAAS,CAAElD,KAAM,GAAIS,MAAO,KAAxE,mBAAOvB,EAAP,KAAoBiH,EAApB,KACA,EAAsDpH,IAAMmE,UAAS,GAArE,mBAAOvC,EAAP,KAA4ByF,EAA5B,KACA,EACErH,IAAMmE,UAAS,GADjB,mBAAO1C,EAAP,KAA8B6F,EAA9B,KAEA,EACEtH,IAAMmE,UAAS,GADjB,mBAAOxC,EAAP,KAA+B4F,EAA/B,KAEA,EAAwCvH,IAAMmE,SAAS,IAAvD,mBAAOqD,EAAP,KAAqBC,EAArB,KACA,EAAsCzH,IAAMmE,UAAS,GAArD,mBAAOuD,EAAP,KAAoBC,EAApB,KACA,EAA0B3H,IAAMmE,SAAS,IAAzC,mBAAOrC,EAAP,KAAc8F,EAAd,KACA,EAAgC5H,IAAMmE,UAAS,GAA/C,mBAAO3E,EAAP,KAAiBqI,EAAjB,KACA,EAA0B7H,IAAMmE,SAAS,IAAzC,oBAAO1E,GAAP,MAAcuG,GAAd,MACA,GAA8BhG,IAAMmE,UAAS,GAA7C,qBAAOwC,GAAP,MAAgBmB,GAAhB,MACA,GACE9H,IAAMmE,UAAS,GADjB,qBAAO4D,GAAP,MAA+BC,GAA/B,MAmFA,SAASC,KACPZ,GAAuB,GACvBC,GAAyB,GACzBC,GAA0B,GAC1BE,EAAgB,IAChBE,GAAe,GACfK,IAA0B,GAoF5B,OA9BAhI,IAAMuE,WAAU,WACd,IAAM2D,EAAMvE,aAAaC,QAAQ,OACjCuE,QAAQC,IAAI,iEAAgBF,GAC5BrB,EACGwB,WAAWH,GACX/E,MAAK,SAACnB,GACL6F,GAAY,GACZ7B,GAAShE,EAAKvC,OACXuC,GAlJPc,QAAQwF,IAAI,CAACjG,EAAIkG,cAAelG,EAAImG,oBACjCrF,MAAK,YAAmB,IAAD,mBAAhBO,EAAgB,KAAVpD,EAAU,KACtB8G,EAAe1D,GACfkE,EAAStH,GACT6H,QAAQC,IAAI,mGAEbK,OAAM,SAACC,GACNP,QAAQC,IAAIM,GACZP,QAAQC,IAAI,mHA8IbK,OAAM,SAACC,GACNP,QAAQC,IAAIM,QAEf,IAGH1I,IAAMuE,WAAU,WACd,IAAMoE,EAAgB,SAACnE,GACP,WAAVA,EAAEoE,KACJX,MAMJ,OAFAY,SAASC,iBAAiB,UAAWH,GAE9B,kBAAME,SAASE,oBAAoB,UAAWJ,MACpD,IAGD,cAAC5I,EAAmBiJ,SAApB,CAA6BhE,MAAO7E,EAApC,SACE,qBAAKf,UAAU,OAAO2B,GAAG,OAAzB,SACE,sBAAK3B,UAAU,OAAf,UACE,eAAC,IAAD,WACE,cAAC,EAAD,CAAQK,MAAOA,GAAOE,SAzChC,WACEkI,GAAY,GACZlE,aAAasF,WAAW,OACxBnD,EAAQM,KAAK,YAsCyC5G,SAAUA,IACxD,eAAC,IAAD,WACE,cAAC,EAAD,CACE0J,OAAK,EACLC,KAAK,IACL3J,SAAUA,EACVgH,UAAWlF,EACXM,oBAnHd,WACEyF,GAAwBzF,IAmHZD,uBA5Gd,WACE4F,GAA2B5F,IA4GfF,sBAjHd,WACE6F,GAA0B7F,IAiHdP,YA3Hd,SAAyBc,GACvB2F,GAAgBD,GAChBD,EAAgBzF,IA0HJb,WAjGd,SAAwBb,GAEtB,IAAMI,EAAUJ,EAAKK,MAAMC,MAAK,SAACC,GAAD,OAAOA,IAAMV,EAAYK,OAEzD6B,EACG+G,qBAAqB9I,EAAKE,IAAKE,GAC/ByC,MAAK,SAACkG,GACLlB,QAAQC,IAAIiB,GACZzB,GAAS,SAAC0B,GAAD,OACPA,EAAMvH,KAAI,SAACwH,GAAD,OAAQA,EAAE/I,MAAQF,EAAKE,IAAM6I,EAAUE,WAGpDd,OAAM,SAACC,GACNP,QAAQC,IAAIM,OAqFJrH,aA5Kd,SAA2Bf,GACzB+B,EACGmH,gBAAgBlJ,EAAKE,KACrB2C,MAAK,WACJyE,GAAS,SAAC0B,GAAD,OAAWA,EAAMG,QAAO,SAACF,GAAD,OAAOA,EAAE/I,MAAQF,EAAKE,aAExDiI,OAAM,SAACC,GACNP,QAAQC,IAAIM,OAsKJ5G,MAAOA,EACPrC,MAAOA,KAET,cAAC,IAAD,CAAO0J,KAAK,UAAZ,SACG3J,EACC,cAAC,IAAD,CAAUK,GAAG,MAEb,cAAC,EAAD,CAAOsG,QAzFvB,SAAsB1G,EAAOwG,GAC3BY,EACG6C,OAAOjK,EAAOwG,GACd9C,MAAK,SAACnB,GACL2B,aAAagG,QAAQ,MAAO3H,EAAKgF,OACjCa,GAAY,GACZ7B,GAASvG,GACT0I,QAAQC,IAAI3I,MAEbgJ,OAAM,SAACC,GACNP,QAAQC,IAAIM,WAkFN,cAAC,IAAD,CAAOS,KAAK,UAAZ,SACG3J,EACC,cAAC,IAAD,CAAUK,GAAG,MAEb,cAAC,EAAD,CAAUwG,WAlF1B,SAAsB5G,EAAOwG,GAC3BY,EACG+C,OAAOnK,EAAOwG,GACd9C,MAAK,SAACnB,GACL8F,IAAW,GACXE,IAA0B,MAE3BS,OAAM,SAACC,GACNP,QAAQC,IAAIM,GACZZ,IAAW,GACXE,IAA0B,WA2EpB,cAAC,IAAD,CAAOmB,KAAK,IAAZ,SACI3J,EAAiC,cAAC,IAAD,CAAUK,GAAG,YAAnC,cAAC,IAAD,CAAUA,GAAG,cAI/BL,GAAY,cAAC,EAAD,IACb,cAAC,EAAD,CACE2C,OAAQP,EACRQ,QAAS6F,GACTrC,UApKV,YAAwC,IAAf3E,EAAc,EAAdA,KAAMD,EAAQ,EAARA,KAC7BqB,EACGwH,aAAa5I,EAAMD,GACnBmC,MAAK,SAACkG,GACLzB,EAAS,CAACyB,GAAF,mBAAcvH,KACtBmG,QAEDQ,OAAM,SAACC,GACNP,QAAQC,IAAIM,SA+JV,cAAC,EAAD,CACEvG,OAAQR,EACRS,QAAS6F,GACTvD,aAlMV,YAA4C,IAAhBzD,EAAe,EAAfA,KAAMS,EAAS,EAATA,MAChCW,EACGyH,gBAAgB7I,EAAMS,GACtByB,MAAK,SAACO,GACL0D,EAAe1D,GACfuE,QAEDQ,OAAM,SAACC,GACNP,QAAQC,IAAIM,SA4LV,cAAC,EAAD,CACEvG,OAAQV,EACRW,QAAS6F,GACT3C,eA3LV,SAA4BtE,GAC1BqB,EACG0H,iBAAiB/I,GACjBmC,MAAK,SAACO,GACL0D,EAAe1D,GACfuE,QAEDQ,OAAM,SAACC,GACNP,QAAQC,IAAIM,SAqLV,cAAC,EAAD,CACEpI,KAAMkH,EACNpF,QAAS6F,GACT9F,OAAQuF,IAEV,cAAC,EAAD,CACEvF,OAAQ4F,GACR3F,QAAS6F,GACTvB,aAAcC,aCxQXqD,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqB/G,MAAK,YAAkD,IAA/CgH,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCAdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,UACE,cAAC,EAAD,QAGJ7B,SAAS8B,eAAe,SAM1BX,M","file":"static/js/main.ab388414.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.03b78ada.svg\";","import React from \"react\";\nimport logo from \"../images/logo.svg\";\nimport { Link, useLocation } from \"react-router-dom\";\n\nfunction Header(props) {\n  const location = useLocation();\n  return (\n    <header className=\"header\">\n      <img className=\"header__logo\" src={logo} alt=\"Место Россия\" />\n      {props.loggedIn ? (\n        <div className=\"header__box\">\n          <p className=\"header__link\">{props.email}</p>\n          <button\n            className=\"header__btn\"\n            onClick={props.onLogOut}\n            type=\"submit\"\n          >\n            Выйти\n          </button>\n        </div>\n      ) : (\n        <Link\n          to={location.pathname === \"/signin\" ? \"/signup\" : \"/signin\"}\n          className=\"header__link\"\n        >\n          {`${location.pathname === \"/signin\" ? \"Регистрация\" : \"Войти\"}`}\n        </Link>\n      )}\n    </header>\n  );\n}\nexport default Header;\n","export default __webpack_public_path__ + \"static/media/pencil.88838230.svg\";","export default __webpack_public_path__ + \"static/media/CloseIcon.118074ba.svg\";","import React from \"react\";\nexport const CurrentUserContext = React.createContext();\n","import React from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction Card(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const isOwn = props.card.owner === currentUser._id;\n  const cardDeleteButtonClassName = `element__delete-button ${\n    isOwn ? \"\" : \"element__delete-button-invisibility\"\n  }`;\n  const isLiked = props.card.likes.some((i) => i === currentUser._id);\n  const cardLikeButtonClassName = `element__like-button ${\n    isLiked ? \"element__like-button_active\" : \"\"\n  }`;\n\n  function handleClick() {\n    props.onCardClick(props.card);\n  }\n  function handleLikeClick() {\n    props.onCardLike(props.card);\n  }\n  function handleDeleteClick() {\n    props.onCardDelete(props.card);\n  }\n\n  return (\n    <article className=\"element\" id={props.card._id}>\n      <img\n        className=\"element__image\"\n        src={props.card.link}\n        alt={props.name}\n        onClick={handleClick}\n      />\n      <div className=\"element__footer\">\n        <h2 className=\"element__paragraph\">{props.card.name}</h2>\n        <button\n          type=\"button\"\n          className={cardLikeButtonClassName}\n          onClick={handleLikeClick}\n        ></button>\n      </div>\n      <p className=\"element__like-counter\">{props.card.likes.length}</p>\n      <button\n        type=\"button\"\n        className={cardDeleteButtonClassName}\n        onClick={handleDeleteClick}\n      ></button>\n    </article>\n  );\n}\nexport default Card;\n","import React from \"react\";\nimport pencil from \"../images/pencil.svg\";\nimport closeIcon from \"../images/CloseIcon.svg\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport Card from \"./Card\";\n\nfunction Main(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <main className=\"content\">\n      <section className=\"profile\">\n        <img\n          className=\"profile__avatar\"\n          src={currentUser.avatar}\n          alt=\"аватар\"\n        />\n        <img\n          className=\"profile__avatar-edit\"\n          src={pencil}\n          alt=\"Редактировать профиль\"\n          onClick={props.isEditAvatarPopupOpen}\n        />\n        <div className=\"profile__info\">\n          <div className=\"profile__info-items\">\n            <h1 className=\"profile__info-name\">{currentUser.name}</h1>\n            <p className=\"profile__info-self-description\">\n              {currentUser.about}\n            </p>\n          </div>\n          <button\n            type=\"button\"\n            className=\"profile__info-edit-button button\"\n            onClick={props.isEditProfilePopupOpen}\n          ></button>\n        </div>\n        <button\n          type=\"button\"\n          className=\"profile__info-add-button button\"\n          onClick={props.isAddPlacePopupOpen}\n        >\n          <img\n            className=\"profile__info-add-button-image\"\n            src={closeIcon}\n            alt=\"Кнопка добавить\"\n          />\n        </button>\n      </section>\n      <section className=\"elements\">\n        {props.cards.map((item) => {\n          return (\n            <Card\n              key={item._id}\n              card={item}\n              onCardClick={props.onCardClick}\n              onCardLike={props.onCardLike}\n              onCardDelete={props.onCardDelete}\n            />\n          );\n        })}\n      </section>\n    </main>\n  );\n}\nexport default Main;\n","import React from 'react';\n\nfunction Footer() {\n    return (\n    <footer className = \"footer\">\n        <p className = \"footer__paragraph\">&copy;2021 Mesto Russia</p>\n    </footer>\n    )\n}\nexport default Footer;","import React from 'react';\n\n\nfunction ImagePopup(props) {\n    return (\n        <div className = {`popup popup-open popup-close ${props.isOpen ? \"popup_opened\" : \"\"}`}>\n            <div className = \"popup-open__container\">\n                <button type = \"button\" className = \"popup__close-button popup-open__close-button\" onClick={props.onClose}></button>\n                <img className = \"popup-open__image\" src = {props.card.link} alt = {props.card.name} id = \"opened-image\"/>\n                <h3 className = \"popup-open__title\" id = \"popup-open-title\">{props.card.name}</h3>\n            </div>\n        </div>\n    )\n}\nexport default ImagePopup;","class Api {\n  constructor({ address, headers }) {\n    this._address = address;\n    this._headers = headers;\n  }\n  _getResponseData(res) {\n    if (!res.ok) {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n    return res.json();\n  }\n  //user information\n  getUserInfo() {\n    return fetch(`${this._address}/users/me`, {\n      method: \"GET\",\n      headers: this._headers,\n    }).then(this._getResponseData);\n  }\n  //edit user profile\n  editUserProfile(name, about) {\n    return fetch(`${this._address}/users/me`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: name,\n        about: about,\n      }),\n    }).then(this._getResponseData);\n  }\n  //get Initial Cards\n  getInitialCards() {\n    return fetch(`${this._address}/cards`, {\n      method: \"GET\",\n      headers: this._headers,\n    }).then(this._getResponseData);\n  }\n  //add user's cards\n  addUserCards(name, link) {\n    return fetch(`${this._address}/cards`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: name,\n        link: link,\n      }),\n    }).then(this._getResponseData);\n  }\n  //remove user's card\n  removeUserCards(id) {\n    return fetch(`${this._address}/cards/${id}`, {\n      method: \"DELETE\",\n      headers: this._headers,\n    }).then(this._getResponseData);\n  }\n  //like post\n  like(id) {\n    return fetch(`${this._address}/cards/${id}/likes`, {\n      method: \"PUT\",\n      headers: this._headers,\n    }).then(this._getResponseData);\n  }\n  //remove like\n  removeLike(id) {\n    return fetch(`${this._address}/cards/${id}/likes`, {\n      method: \"DELETE\",\n      headers: {\n        authorization: this._token,\n      },\n    }).then(this._getResponseData);\n  }\n  //update user avatar\n  updateUserAvatar(info) {\n    return fetch(`${this._address}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: info.avatar,\n      }),\n    }).then(this._getResponseData);\n  }\n  changeLikeCardStatus(id, isLiked) {\n    const method = isLiked ? \"DELETE\" : \"PUT\";\n    return fetch(`${this._address}/cards/${id}/likes`, {\n      method: method,\n      headers: this._headers,\n    }).then(this._getResponseData);\n  }\n}\n\nconst api = new Api({\n  address: \"https://api.oleestral.nomoredomains.work\",\n  headers: {\n    authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\n    \"Content-Type\": \"application/json\",\n  },\n});\nexport default api;\n","import React from \"react\";\n\nfunction PopupWithForm(props) {\n  return (\n    <div\n      className={`popup popup-close popup-${props.name} ${\n        props.isOpen ? \"popup_opened\" : \"\"\n      }`}\n    >\n      <div className=\"popup__container\">\n        <button\n          type=\"button\"\n          className=\"popup__close-button\"\n          onClick={props.onClose}\n        ></button>\n        <h2 className=\"popup__edit-profile\">{props.title}</h2>\n        <form\n          name={`input-container form-${props.name}`}\n          className=\"popup__form popup__input-container \"\n          onSubmit={props.onSubmit}\n        >\n          <fieldset className=\"popup__set\">{props.children}</fieldset>\n          <button\n            type=\"submit\"\n            className=\"popup__submit popup__submit-button popup__save-button\"\n          >\n            {props.buttonText}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\nexport default PopupWithForm;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction EditProfilePopup(props) {\n  const [name, setName] = React.useState(\"\");\n  const [description, setDescription] = React.useState(\"\");\n  const currentUser = React.useContext(CurrentUserContext);\n\n  function handleChangeName(e) {\n    setName(e.target.value);\n  }\n  function handleChangeDescription(e) {\n    setDescription(e.target.value);\n  }\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser, props.isOpen]);\n\n  return (\n    <PopupWithForm\n      name=\"edit\"\n      title=\"Редактировать профиль\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      buttonText=\"Сохранить\"\n      onSubmit={handleSubmit}\n    >\n      <div className=\"popup__section\">\n        <input\n          className=\"popup__input popup__item popup__item_type_name\"\n          type=\"text\"\n          id=\"name\"\n          name=\"name\"\n          placeholder=\"Ваше имя\"\n          autoComplete=\"off\"\n          minLength=\"2\"\n          maxLength=\"40\"\n          required\n          value={name}\n          onChange={handleChangeName}\n        />\n        <span className=\"popup__input-type-error name-error\"></span>\n      </div>\n      <div className=\"popup__section\">\n        <input\n          className=\"popup__input popup__item popup__item_type_caption\"\n          type=\"text\"\n          id=\"about\"\n          name=\"about\"\n          placeholder=\"О себе\"\n          autoComplete=\"off\"\n          minLength=\"2\"\n          maxLength=\"200\"\n          required\n          value={description}\n          onChange={handleChangeDescription}\n        />\n        <span className=\"popup__input-type-error caption-error\"></span>\n      </div>\n    </PopupWithForm>\n  );\n}\nexport default EditProfilePopup;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction EditAvatarPopup(props) {\n  const ref = React.useRef();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateAvatar({\n      avatar: ref.current.value,\n    });\n  }\n\n  return (\n    <PopupWithForm\n      name=\"update\"\n      title=\"Обновить аватар\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      buttonText=\"Сохранить\"\n      onSubmit={handleSubmit}\n    >\n      <div className=\"popup__section\">\n        <input\n          className=\"popup__input popup__item popup__item_avatar_link\"\n          type=\"url\"\n          id=\"avatar\"\n          name=\"avatar\"\n          placeholder=\"Cсылка на картинку\"\n          autoComplete=\"off\"\n          required\n          ref={ref}\n        />\n        <span className=\"popup__input-type-error avatar-error\"></span>\n      </div>\n    </PopupWithForm>\n  );\n}\nexport default EditAvatarPopup;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction AddPlacePopup(props) {\n  const [place, setPlace] = React.useState(\"\");\n  const [link, setLink] = React.useState(\"\");\n\n  function handleChangeLink(e) {\n    setLink(e.target.value);\n  }\n  function handleChangePlace(e) {\n    setPlace(e.target.value);\n  }\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onAddCard({\n      name: place,\n      link,\n    });\n  }\n  return (\n    <PopupWithForm\n      name=\"add\"\n      title=\"Новое место\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      buttonText=\"Сохранить\"\n      onSubmit={handleSubmit}\n    >\n      <div className=\"popup__section\">\n        <input\n          className=\"popup__input popup__item popup__item_card_name\"\n          type=\"text\"\n          id=\"name-place\"\n          name=\"name\"\n          placeholder=\"Название\"\n          autoComplete=\"off\"\n          minLength=\"2\"\n          maxLength=\"30\"\n          required\n          value={place}\n          onChange={handleChangePlace}\n        />\n        <span className=\"popup__input-type-error name-place-error\"></span>\n      </div>\n      <div className=\"popup__section\">\n        <input\n          className=\"popup__input popup__item popup__item_card_link\"\n          type=\"url\"\n          id=\"link\"\n          name=\"link\"\n          placeholder=\"Cсылка на картинку\"\n          autoComplete=\"off\"\n          required\n          value={link}\n          onChange={handleChangeLink}\n        />\n        <span className=\"popup__input-type-error link-error\"></span>\n      </div>\n    </PopupWithForm>\n  );\n}\nexport default AddPlacePopup;\n","import React from \"react\";\nimport { withRouter, useHistory } from \"react-router-dom\";\n\nfunction Login(props) {\n  const history = useHistory();\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n\n  function handleChangeEmail(e) {\n    setEmail(e.target.value);\n  }\n  function handleChangePasword(e) {\n    setPassword(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onLogin(email, password);\n    history.push(\"/\");\n  }\n\n  return (\n    <div className=\"login\">\n      <div className=\"login__container\">\n        <h2 className=\"login__title\">Вход</h2>\n        <form className=\"login__form\" onSubmit={handleSubmit}>\n          <input\n            className=\"popup__input popup__item login__item\"\n            name=\"email\"\n            id=\"email\"\n            placeholder=\"Email\"\n            required\n            type=\"email\"\n            value={email}\n            onChange={handleChangeEmail}\n          />\n          <input\n            className=\"popup__input popup__item login__item\"\n            name=\"password\"\n            id=\"password\"\n            placeholder=\"Пароль\"\n            required\n            type=\"password\"\n            password={password}\n            onChange={handleChangePasword}\n          />\n          <button className=\"login__button\">Войти</button>\n        </form>\n      </div>\n    </div>\n  );\n}\nexport default withRouter(Login);\n","import React from \"react\";\nimport { Link, withRouter, useHistory } from \"react-router-dom\";\n\nfunction Register(props) {\n  const history = useHistory();\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n\n  function handleSetEmail(e) {\n    setEmail(e.target.value);\n  }\n  function handleSetPasword(e) {\n    setPassword(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onRegister(email, password);\n    history.push(\"/signin\");\n  }\n\n  return (\n    <div className=\"login\">\n      <div className=\"login__container\">\n        <h2 className=\"login__title\">Регистрация</h2>\n        <form className=\"login__form\" onSubmit={handleSubmit}>\n          <input\n            className=\"popup__input popup__item login__item\"\n            name=\"email\"\n            id=\"email\"\n            placeholder=\"Email\"\n            required\n            value={email}\n            onChange={handleSetEmail}\n            autoComplete=\"off\"\n          />\n          <input\n            className=\"popup__input popup__item login__item\"\n            name=\"password\"\n            id=\"password\"\n            placeholder=\"Пароль\"\n            required\n            type=\"password\"\n            value={password}\n            autoComplete=\"off\"\n            onChange={handleSetPasword}\n          />\n          <button className=\"login__button\">Зарегистрироваться</button>\n          <p className=\"login__paragraph\">\n            Уже зарегистрированы?{\" \"}\n            <Link to=\"/signin\" className=\"login__link\">\n              Войти\n            </Link>\n          </p>\n        </form>\n      </div>\n    </div>\n  );\n}\nexport default withRouter(Register);\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props }) => {\n  return (\n    <Route>\n      {() =>\n        props.loggedIn ? <Component {...props} /> : <Redirect to=\"./signup\" />\n      }\n    </Route>\n  );\n};\n\nexport default ProtectedRoute;\n","export default __webpack_public_path__ + \"static/media/success.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/error.df8eddf6.svg\";","import React from \"react\";\nimport success from \"../images/success.svg\";\nimport error from \"../images/error.svg\";\n\nfunction InfoTooltip(props) {\n  return (\n    <div className={`popup popup-close ${props.isOpen ? \"popup_opened\" : \"\"}`}>\n      <div className=\"popup__container\">\n        <button\n          type=\"button\"\n          className=\"popup__close-button\"\n          onClick={props.onClose}\n        ></button>\n        <img\n          className=\"popup__image\"\n          src={props.isSuccessful ? success : error}\n          alt={props.isSuccessful ? \"Успешно\" : \"Ошибка\"}\n        />\n        <h2 className=\"popup__edit-profile popup__tooltip-title\">\n          {props.isSuccessful\n            ? \"Вы успешно зарегистрировались!\"\n            : \"Что-то пошло не так! Попробуйте ещё раз.\"}{\" \"}\n        </h2>\n      </div>\n    </div>\n  );\n}\n\nexport default InfoTooltip;\n","class Auth {\n  constructor({ BASE_URL, headers  }) {\n    this._url = BASE_URL;\n    this._headers = headers;\n  }\n  _getResponseData(res) {\n    if (!res.ok) {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n    return res.json();\n  }\n  signIn(email, password) {\n    return fetch(`${this._url}/signin`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({ email: email, password: password }),\n    }).then(this._getResponseData);\n  }\n  signUp(email, password) {\n    return fetch(`${this._url}/signup`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({ email: email, password: password }),\n    }).then(this._getResponseData);\n  }\n  checkToken(token) {\n    return fetch(`${this._url}/users/me`, {\n      method: \"GET\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n    }).then(this._getResponseData);\n  }\n}\nconst auth = new Auth({ BASE_URL: \"https://api.oleestral.nomoredomains.work\",\nheaders: {\n  \"Content-Type\": \"application/json\",\n  \"Accept\": \"application/json\"\n} });\nexport default auth;\n","import React from \"react\";\nimport \"../index.css\";\nimport Header from \"../components/Header\";\nimport Main from \"./Main\";\nimport Footer from \"../components/Footer\";\nimport ImagePopup from \"./ImagePopup\";\nimport api from \"../utils/api\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport {\n  Redirect,\n  Route,\n  Switch,\n  useHistory,\n  BrowserRouter,\n} from \"react-router-dom\";\nimport auth from \"../utils/auth\";\n\nfunction App() {\n  const history = useHistory();\n  const [currentUser, setCurrentUser] = React.useState({ name: \"\", about: \"\" });\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] =\n    React.useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] =\n    React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [imageOpened, setImageOpened] = React.useState(false);\n  const [cards, setCards] = React.useState([]);\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [email, setEmail] = React.useState(\"\");\n  const [success, setSuccess] = React.useState(false);\n  const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] =\n    React.useState(false);\n\n  // user data & initial cards\n  function getGeneralData() {\n    Promise.all([api.getUserInfo(), api.getInitialCards()])\n      .then(([info, card]) => {\n        setCurrentUser(info);\n        setCards(card);\n        console.log(\"у меня получилось\")\n      })\n      .catch((err) => {\n        console.log(err);\n        console.log(\"у меня не получилось\")\n      });\n  }\n\n  //delete card\n  function handleDeleteClick(card) {\n    api\n      .removeUserCards(card._id)\n      .then(() => {\n        setCards((state) => state.filter((c) => c._id !== card._id));\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n  // update user profile\n  function handleUpdateUser({ name, about }) {\n    api\n      .editUserProfile(name, about)\n      .then((info) => {\n        setCurrentUser(info);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n  // update user avatar\n  function handleUpdateAvatar(link) {\n    api\n      .updateUserAvatar(link)\n      .then((info) => {\n        setCurrentUser(info);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n  // add card\n  function handleAddCard({ name, link }) {\n    api\n      .addUserCards(name, link)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n  // open card\n  function handleCardClick(item) {\n    setImageOpened(!imageOpened);\n    setSelectedCard(item);\n  }\n  // for openning add popup\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(!isAddPlacePopupOpen);\n  }\n  // for openning avatar popup\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(!isEditAvatarPopupOpen);\n  }\n  // for openning profile popup\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(!isEditProfilePopupOpen);\n  }\n\n  // close popups\n  function closeAllPopups() {\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setSelectedCard({});\n    setImageOpened(false);\n    setIsInfoTooltipPopupOpen(false);\n  }\n  // like\n  function handleCardLike(card) {\n    // Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some((i) => i === currentUser._id);\n    // Отправляем запрос в API и получаем обновлённые данные карточки\n    api\n      .changeLikeCardStatus(card._id, isLiked)\n      .then((newCard) => {\n        console.log(newCard)\n        setCards((state) =>\n          state.map((c) => (c._id === card._id ? newCard : c))\n        );\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n  //login\n  function handleSignIn(email, password) {\n    auth\n      .signIn(email, password)\n      .then((item) => {\n        localStorage.setItem(\"jwt\", item.token);\n        setLoggedIn(true);\n        setEmail(email);\n        console.log(email);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n  //signup\n  function handleSignUp(email, password) {\n    auth\n      .signUp(email, password)\n      .then((item) => {\n        setSuccess(true);\n        setIsInfoTooltipPopupOpen(true);\n      })\n      .catch((err) => {\n        console.log(err);\n        setSuccess(false);\n        setIsInfoTooltipPopupOpen(true);\n      });\n  }\n  //logout\n  function handleLogOut() {\n    setLoggedIn(false);\n    localStorage.removeItem(\"jwt\");\n    history.push(\"/signin\");\n  }\n\n  React.useEffect(() => {\n    const jwt = localStorage.getItem(\"jwt\");\n    console.log('токен у меня', jwt)\n    auth\n      .checkToken(jwt)\n      .then((item) => {\n        setLoggedIn(true);\n        setEmail(item.email);\n        if(item) {\n          getGeneralData()\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n\n  // closing popups by Escape\n  React.useEffect(() => {\n    const closeByEscape = (e) => {\n      if (e.key === \"Escape\") {\n        closeAllPopups();\n      }\n    };\n\n    document.addEventListener(\"keydown\", closeByEscape);\n\n    return () => document.removeEventListener(\"keydown\", closeByEscape);\n  }, []);\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"root\" id=\"root\">\n        <div className=\"page\">\n          <BrowserRouter>\n            <Header email={email} onLogOut={handleLogOut} loggedIn={loggedIn} />\n            <Switch>\n              <ProtectedRoute\n                exact\n                path=\"/\"\n                loggedIn={loggedIn}\n                component={Main}\n                isAddPlacePopupOpen={handleAddPlaceClick}\n                isEditProfilePopupOpen={handleEditProfileClick}\n                isEditAvatarPopupOpen={handleEditAvatarClick}\n                onCardClick={handleCardClick}\n                onCardLike={handleCardLike}\n                onCardDelete={handleDeleteClick}\n                cards={cards}\n                email={email}\n              />\n              <Route path=\"/signin\">\n                {loggedIn ? (\n                  <Redirect to=\"/\" />\n                ) : (\n                  <Login onLogin={handleSignIn} />\n                )}\n              </Route>\n              <Route path=\"/signup\">\n                {loggedIn ? (\n                  <Redirect to=\"/\" />\n                ) : (\n                  <Register onRegister={handleSignUp} />\n                )}\n              </Route>\n              <Route path=\"/\">\n                {!loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/signup\" />}\n              </Route>\n            </Switch>\n          </BrowserRouter>\n          {loggedIn && <Footer />}\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopups}\n            onAddCard={handleAddCard}\n          />\n\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n          />\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onUpdateAvatar={handleUpdateAvatar}\n          />\n          <ImagePopup\n            card={selectedCard}\n            onClose={closeAllPopups}\n            isOpen={imageOpened}\n          />\n          <InfoTooltip\n            isOpen={isInfoTooltipPopupOpen}\n            onClose={closeAllPopups}\n            isSuccessful={success}\n          />\n        </div>\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}